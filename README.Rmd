---
output: md_document
---
```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
  version <- as.vector(read.dcf('DESCRIPTION')[, 'Version'])                                                                  
  version <- gsub('-', '.', version)
```
<!-- badges: start -->
[![CRAN Version](https://www.r-pkg.org/badges/version/bama)](https://cran.r-project.org/package=bama)
[![Github Version](https://img.shields.io/badge/Github-`r version`-informational.svg?style=flat)](commits/master)
[![Travis CI](https://travis-ci.org/umich-cphds/bama.svg?branch=master)](https://travis-ci.org/umich-cphds/bama)
<!-- badges: end -->

# Bayesian Mediation Analysis

`bama` is a Bayesian inference method that uses continuous shrinkage priors for
high-dimensional Bayesian mediation analysis, developed by Song et al (2018).
`bama` provides estimates for the regression coefficients as well as
the posterior inclusion probability for ranking mediators.

## Installation
You can install `bama` via CRAN

```{r, eval = F}
install.packages("bama")
```
Or devtools
```{r, eval = F}
devtools::install_github("umich-cphds/bama", build_opts = c())
```

If you wish to install the package via devtools, you will need a C++ compiler
installed. This can be accomplished by installing Rtools on Windows and Xcode
on MacOS.

## Example
This example is taken from the `bama` help file to help you get started using
the method. Please check the documentation of the function by typing
`?bama::bama`, and the vignette by typing `vingette("bama")` in R.

`bama` includes an example dataset, `bama.data`. It is a `data.frame` with a
numeric response `y`, numeric exposure `a` and 100 numeric mediators named
`m1, m2, ..., m100`.

We recommend using much larger numbers for `burnin` and `ndraws`, for
example (30000, 1000).

```{r}
library(bama)

Y <- bama.data$y
A <- bama.data$a

# grab the mediators from the example data.frame
M <- as.matrix(bama.data[, paste0("m", 1:100)], nrow(bama.data))

# We just include the intercept term in this example.
C1 <- matrix(1, nrow(M), 1)
C2 <- matrix(1, nrow(M), 1)
beta.m  <- rep(0, 100)
alpha.a <- rep(0, 100)

set.seed(1245)
bama.out <- bama(Y, A, M, C1, C2, beta.m, alpha.a, burnin = 1000, ndraws = 100)

# Rank mediators and see summary information
head(summary(bama.out, rank = T))
```

# Reference
Song, Y. , Zhou, X. , Zhang, M. , Zhao, W. , Liu, Y. , Kardia, S. L., Roux, A. V.,
Needham, B. L., Smith, J. A. and Mukherjee, B. (2019), Bayesian shrinkage
estimation of high dimensional causal mediation effects in omics studies.
Biometrics. Accepted Author Manuscript. [10.1111/biom.13189](https://doi.org/10.1111/biom.13189)
